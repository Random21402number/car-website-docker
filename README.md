# Уеб сайт за автомобили - Docker Compose проект
Контейнеризиран уеб сайт за търговия с автомобили, изграден с PHP, Apache и MySQL чрез Docker Compose.
# Стартиране на проекта:

Отворете терминал в главната директория на проекта (Test/)
Изградете и стартирайте контейнерите:
bashdocker compose up --build

# Достъп до приложението:

Уеб сайт: http://localhost:8080
База данни: localhost:3306



# Други полезни команди:
bash# Стартиране в background режим
docker compose up -d

# Спиране на контейнерите
docker compose down

# Преглед на логове
docker compose logs

# Преизграждане на контейнерите
docker compose up --build --force-recreate
Как работи всеки от компонентите
Уеб сървър контейнер (web)

# Базов образ: php:8.1-apache
Функция: Обслужва PHP приложението чрез Apache уеб сървър
Порт: 8080 (мапнат към контейнер порт 80)
# Възможности:

PHP 8.1 с MySQL разширения (mysqli, pdo, pdo_mysql)
Apache с активиран mod_rewrite модул
Автоматично синхронизиране на кода чрез volume mounting


# Обем данни: ./src се мапва към /var/www/html в контейнера
Мрежа: Свързан към app-network за комуникация с базата данни

База данни контейнер (db)

Базов образ: mysql:5.7
Функция: MySQL сървър за съхранение на данни
Порт: 3306
Конфигурация:

База данни: carwebsite
Root парола: root
Потребител: user / Парола: password
Автоматична инициализация от SQL файл


Persistent storage: Данните се съхраняват в Docker volume db_data
Инициализация: SQL файловете от ./db се изпълняват автоматично при първо стартиране

# Мрежа (app-network)

Тип: Bridge network
Цел: Изолирана комуникация между контейнерите
Достъп: Контейнерите могат да се достъпват помежду си чрез имената на услугите

# Как е осъществена комуникацията между услугите
Мрежова архитектура:

Изолирана мрежа: И двата контейнера са свързани към персонализирана мрежа app-network
Service Discovery: Контейнерите могат да се достъпват помежду си чрез имената на услугите
DNS резолюция: Docker автоматично разрешава имената на контейнерите в IP адреси

# Конкретна имплементация:
В PHP кода (src/ файловете):
php$host = 'db';  // Използва се името на услугата от docker-compose.yml
dbname = 'carwebsite';
username = 'user';
password = 'password';
# Комуникационен поток:

Уеб контейнерът получава HTTP заявка на порт 8080
PHP скриптът се изпълнява и прави заявка към базата данни
Заявката се изпраща към db:3306 (име на услугата:порт)
Docker разрешава db към IP адреса на MySQL контейнера
MySQL контейнерът обработва заявката и връща резултата
PHP скриптът получава данните и генерира HTML отговор
Apache изпраща отговора обратно към потребителя.

# Зависимости между услугите:

depends_on: Уеб контейнерът чака базата данни да се стартира първо
Здравни проверки: MySQL трябва да бъде готов да приема връзки преди уеб приложението да започне работа
Автоматично възстановяване: При рестартиране комуникацията се възстановява автоматично

# Сигурност и изолация:

Контейнерите са изолирани от host системата
Комуникацията се осъществява само в рамките на app-network
Външен достъп само чрез експонираните портове (8080 и 3306)

# Тестване на връзката
За да проверите дали комуникацията работи правилно:
bash# Влезте в уеб контейнера
docker exec -it php_app bash

# Тествайте връзката към базата данни
ping db
mysql -h db -u user -p
